

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Understanding the Fabcar Network &mdash; hyperledger-fabricdocs master documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          


          
            <a href="index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a>

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="whatis.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What’s new in v1.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html#release-notes">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="developapps/developing_applications.html">Developing Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops_guide.html">Operations Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_ref.html">Commands Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fabric-FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributions Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="questions.html">Still Have Questions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="status.html">Status</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hyperledger-fabricdocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Understanding the Fabcar Network</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/understand_fabcar_network.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="understanding-the-fabcar-network">
<h1>Understanding the Fabcar Network<a class="headerlink" href="#understanding-the-fabcar-network" title="Permalink to this headline">¶</a></h1>
<p>Fabcar was designed to leverage a network stripped down to only the components
necessary to run an application. And even with that level of simplification,
the <code class="docutils literal notranslate"><span class="pre">./startFabric.sh</span></code> script takes care of the installation and
configuration not baked into the network itself.</p>
<p>Obscuring the underpinnings of the network to that degree is fine for the
majority of application developers. They don’t necessarily need to know how
network components actually work in detail in order to create their app.</p>
<p>But for those who do want to know about the fun stuff going on under the covers,
let’s go through how applications <strong>connect</strong> to the network and
how they propose <strong>queries</strong> and <strong>updates</strong> on a more granular level, as well
as point out the differences between a small scale test network like Fabcar and
how apps will usually end up working in the real world.</p>
<p>We’ll also point you to where you can get detailed information about how Fabric
networks are created and how a transaction flow works beyond the scope of the
role an application plays.</p>
<div class="section" id="components-of-the-fabcar-network">
<h2>Components of the Fabcar Network<a class="headerlink" href="#components-of-the-fabcar-network" title="Permalink to this headline">¶</a></h2>
<p>Fabcar uses the “basic-network” sample as its limited development network. It
consists of a single peer node configured to use CouchDB as the state database,
a single “solo” ordering node, a certificate authority (CA) and a CLI container
for executing commands.</p>
<p>For detailed information on these components and what they do, refer to
<a class="reference internal" href="build_network.html"><span class="doc">Building Your First Network</span></a>.</p>
<p>These components are bootstrapped by the <code class="docutils literal notranslate"><span class="pre">./startFabric.sh</span></code> script, which
also:</p>
<ul class="simple">
<li>creates a channel and joins the peer to the channel</li>
<li>installs the <code class="docutils literal notranslate"><span class="pre">fabcar</span></code> smart contract onto the peer’s file system and instantiates it on the channel (instantiate starts a container)</li>
<li>calls the <code class="docutils literal notranslate"><span class="pre">initLedger</span></code> function to populate the channel ledger with 10 unique cars</li>
</ul>
<p>These operations would typically be done by an organizational or peer admin.
The script uses the CLI to execute these commands, however there is support in
the SDK as well. Refer to the <a class="reference external" href="https://github.com/hyperledger/fabric-sdk-node">Hyperledger Fabric Node SDK repo</a> for example scripts.</p>
</div>
<div class="section" id="how-an-application-interacts-with-the-network">
<h2>How an Application Interacts with the Network<a class="headerlink" href="#how-an-application-interacts-with-the-network" title="Permalink to this headline">¶</a></h2>
<p>Applications use <strong>APIs</strong> to invoke smart contracts. These smart contracts are
hosted in the network and identified by name and version. For example, our
chaincode container is titled - <code class="docutils literal notranslate"><span class="pre">dev-peer0.org1.example.com-fabcar-1.0</span></code> -
where the name is <code class="docutils literal notranslate"><span class="pre">fabcar</span></code>, the version is <code class="docutils literal notranslate"><span class="pre">1.0</span></code>, and the peer it is running
against is <code class="docutils literal notranslate"><span class="pre">dev-peer0.org1.example.com</span></code>.</p>
<p>APIs are accessible with an SDK. For purposes of this exercise, we’re using the
<a class="reference external" href="https://fabric-sdk-node.github.io/">Hyperledger Fabric Node SDK</a> though
there is also a Java SDK and CLI that can be used to drive transactions.
SDKs encapsulate all access to the ledger by allowing an application to
communicate with smart contracts, run queries, or receive ledger updates. These APIs use
several different network addresses and are run with a set of input parameters.</p>
<p>Smart contracts are installed by a peer administrator and then instantiated on a
channel by an identity fulfilling the chaincode’s instantiation policy, which by
default is comprised of channel administrators.  The instantiation of
the smart contract follows the same transaction flow as a normal invocation - endorse,
order, validate, commit - and is a prerequisite to interacting with a chaincode
container. The script that launched our simplified Fabcar test network took care
of the installation and instantiation for us.</p>
<div class="section" id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<p>Queries are the simplest kind of invocation: a call and response.  The most common query
will interrogate the state database for the current value associated
with a key (<code class="docutils literal notranslate"><span class="pre">GetState</span></code>).  However, the <a class="reference external" href="https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStub">chaincode shim interface</a>
also allows for different types of <code class="docutils literal notranslate"><span class="pre">Get</span></code> calls (e.g. <code class="docutils literal notranslate"><span class="pre">GetHistoryForKey</span></code> or <code class="docutils literal notranslate"><span class="pre">GetCreator</span></code>).</p>
<p>In our example, the peer holds a hash chain of all transactions and maintains
chaincode state through use of a state database, which in our case is a CouchDB container.  CouchDB
provides the added functionality of rich queries, contingent upon the chaincode data (key/val pairs)
being modeled as JSON.  When we call the <code class="docutils literal notranslate"><span class="pre">GetState</span></code> API in our smart contract, we
are retrieving the JSON value associated with a car from the CouchDB state database.</p>
<p>Queries are constructed by identifying a peer, a chaincode, a channel and a set of
inputs (e.g. the key) for an available chaincode function and then utilizing the
<code class="docutils literal notranslate"><span class="pre">chain.queryByChaincode</span></code> API to send the query to the peer.  The corresponding
value to the supplied inputs is returned to the application client as a response.</p>
</div>
<div class="section" id="updates">
<h3>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h3>
<p>Ledger updates start with an application generating a transaction proposal. As with
query, a request is constructed to identify a peer, chaincode, channel, function, and
set of inputs for the transaction. The program then calls the
<code class="docutils literal notranslate"><span class="pre">channel.SendTransactionProposal</span></code> API to send the transaction proposal to the
peer(s) for endorsement.</p>
<p>The network (i.e. the endorsing peer(s)) returns a proposal response, which the
application uses to build and sign a transaction request. This request is sent
to the ordering service by calling the <code class="docutils literal notranslate"><span class="pre">channel.sendTransaction</span></code> API. The
ordering service bundles the transaction into a block and delivers it to all
peers on a channel for validation (the Fabcar network has only one peer and one channel).</p>
<p>Finally the application uses the <a class="reference internal" href="peer_event_services.html"><span class="doc">Peer channel-based event services</span></a> to register for events
associated with a specific transaction ID so that the application can be notified
about the fate of a transaction (i.e. valid or invalid).</p>
</div>
</div>
<div class="section" id="for-more-information">
<h2>For More Information<a class="headerlink" href="#for-more-information" title="Permalink to this headline">¶</a></h2>
<p>To learn more about how a transaction flow works beyond the scope of an
application, check out <a class="reference internal" href="txflow.html"><span class="doc">Transaction Flow</span></a>.</p>
<p>To get started developing chaincode, read <a class="reference internal" href="chaincode4ade.html"><span class="doc">Chaincode for Developers</span></a>.</p>
<p>For more information on how endorsement policies work, check out
<a class="reference internal" href="endorsement-policies.html"><span class="doc">Endorsement policies</span></a>.</p>
<p>For a deeper dive into the architecture of Hyperledger Fabric, check out
<a class="reference internal" href="arch-deep-dive.html"><span class="doc">Architecture Origins</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2019.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>